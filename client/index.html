<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>@Random Cheat | Randoma.lol</title>
        <link rel="stylesheet" href="styles.css">
        <link rel="apple-touch-icon" sizes="180x180" href="https://assets.guns.lol/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://assets.guns.lol/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://assets.guns.lol/favicon/favicon-16x16.png">
        <meta name="description" content="Profile of Random Cheat">
        <meta property="og:title" content="@Random Cheat | profilehub.com">
        <meta property="og:description" content="Profile of Random Cheat">
        <meta property="og:image" content="https://og.guns.lol/api/og?username=randomcheat&t=1745258570100">
        <meta name="twitter:card" content="summary_large_image">
        <script src="/socket.io/socket.io.js"></script>
    </head>
<body>
    <!-- Background Video -->
    <video id="background-video" class="background-video" muted loop>
        <source src="background.mp4" type="video/mp4">
    </video>

    <!-- Click to Enter Overlay -->
    <div class="enter-overlay">
        <div class="enter-text">click to enter...</div>
    </div>

    <!-- Snowflake Effects -->
    <div class="snowflakes" aria-hidden="true">
        <div class="snowflake">❅</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❅</div>
    </div>




<!-- Profile Section -->
    <div class="profile-container" style="opacity: 0; transform: translateY(100%); position: absolute;">
        <img class="avatar" src="https://cdn.discordapp.com/avatars/1259099179205267477/a_ee40274f7b479b80e7fa6b78e08242a1.gif" alt="Avatar">
        <div class="text-container">
            <h1 class="username">Random Cheat</h1>
        </div>
        <h3 class="description">Tears of sorrow mingle with resilience, navigating life's poignant journey.</h3>
        <h3 class="descriptiontest">Tears of sorrow mingle with resilience, navigating life's poignant journey.</h3>
        <span class="location">
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="4 2 16 20">
                <path fill="currentColor" d="M12 12q.825 0 1.413-.587T14 10t-.587-1.412T12 8t-1.412.588T10 10t.588 1.413T12 12m0 10q-4.025-3.425-6.012-6.362T4 10.2q0-3.75 2.413-5.975T12 2t5.588 2.225T20 10.2q0 2.5-1.987 5.438T12 22"/>
            </svg>
            Mars!
        </span>
       
       <div class="discord-Profile-Container">
         <div class="card" style="position:relative;">
           <img id="avatar" class="avatar" src="" alt="">
           <img id="statusIcon" style="width:15px;height:15px;position:absolute;left:70px;top:65px;border-radius:50%;box-shadow:0 1px 4px #0008;z-index:2;pointer-events:none;" src="" alt="status">
           <div class="content">
             <div id="name" class="name">Loading…</div>
             <div id="activityLine1" class="activity"></div>
             <div id="activityLine2" class="activity"></div>
           </div>
           <img id="asset" class="asset" src="" alt="" style="width:40px;height:40px;">
         </div>
       </div>
       
        <div class="social-links">
            <a href="https://youtube.com/@Random_Cheat" target="_blank" class="social-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="1.99 5 20.01 14.01"><path fill="currentColor" d="M21.593 7.203a2.506 2.506 0 0 0-1.762-1.766C18.265 5.007 12 5 12 5s-6.264-.007-7.831.404a2.56 2.56 0 0 0-1.766 1.778c-.413 1.566-.417 4.814-.417 4.814s-.004 3.264.406 4.814c.23.857.905 1.534 1.763 1.765c1.582.43 7.83.437 7.83.437s6.265.007 7.831-.403a2.515 2.515 0 0 0 1.767-1.763c.414-1.565.417-4.812.417-4.812s.02-3.265-.407-4.831zM9.996 15.005l.005-6l5.207 3.005l-5.212 2.995z"></path></svg>
            </a>
            <a href="https://github.com/Nobita765432" target="_blank" class="social-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="2.05 2 19.95 19.46"><path fill="currentColor" fill-rule="evenodd" d="M12.026 2c-5.509 0-9.974 4.465-9.974 9.974c0 4.406 2.857 8.145 6.821 9.465c.499.09.679-.217.679-.481c0-.237-.008-.865-.011-1.696c-2.775.602-3.361-1.338-3.361-1.338c-.452-1.152-1.107-1.459-1.107-1.459c-.905-.619.069-.605.069-.605c1.002.07 1.527 1.028 1.527 1.028c.89 1.524 2.336 1.084 2.902.829c.091-.645.351-1.085.635-1.334c-2.214-.251-4.542-1.107-4.542-4.93c0-1.087.389-1.979 1.024-2.675c-.101-.253-.446-1.268.099-2.64c0 0 .837-.269 2.742 1.021a9.582 9.582 0 0 1 2.496-.336a9.554 9.554 0 0 1 2.496.336c1.906-1.291 2.742-1.021 2.742-1.021c.545 1.372.203 2.387.099 2.64c.64.696 1.024 1.587 1.024 2.675c0 3.833-2.33 4.675-4.552 4.922c.355.308.675.916.675 1.846c0 1.334-.012 2.41-.012 2.737c0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974C22 6.465 17.535 2 12.026 2z" clip-rule="evenodd"></path></svg>
            </a>
            <a href="https://discord.com/invite/qJRNPY23T9" target="_blank" class="social-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="1.96 4.26 20.03 15.53"><path fill="currentColor" d="M14.82 4.26a10.14 10.14 0 0 0-.53 1.1a14.66 14.66 0 0 0-4.58 0a10.14 10.14 0 0 0-.53-1.1a16 16 0 0 0-4.13 1.3a17.33 17.33 0 0 0-3 11.59a16.6 16.6 0 0 0 5.07 2.59A12.89 12.89 0 0 0 8.23 18a9.65 9.65 0 0 1-1.71-.83a3.39 3.39 0 0 0 .42-.33a11.66 11.66 0 0 0 10.12 0q.21.18.42.33a10.84 10.84 0 0 1-1.71.84a12.41 12.41 0 0 0 1.08 1.78a16.44 16.44 0 0 0 5.06-2.59a17.22 17.22 0 0 0-3-11.59a16.09 16.09 0 0 0-4.09-1.35zM8.68 14.81a1.94 1.94 0 0 1-1.8-2a1.93 1.93 0 0 1 1.8-2a1.93 1.93 0 0 1 1.8 2a1.93 1.93 0 0 1-1.8 2zm6.64 0a1.94 1.94 0 0 1-1.8-2a1.93 1.93 0 0 1 1.8-2a1.92 1.92 0 0 1 1.8 2a1.92 1.92 0 0 1-1.8 2z"></path></svg>
            </a>
        </div>
         <!-- Page Views -->
    <div class="page-views">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"></path></svg>
        <span>546K</span>
    </div>
    </div>

    <!-- Volume Slider -->
    <div class="volume-wrapper" id="volume-wrapper">
        <!-- Speaker and icon group -->
        <div class="icon-container">
            <!-- Speaker Base with Rounded Corners -->
            <svg class="speaker-icon" viewBox="0 0 24 24">
                <path d="M3 9.5a.5.5 0 0 1 .5-.5h3.5l4.5-4.5a.5.5 0 0 1 .8.4v15.2a.5.5 0 0 1-.8.4l-4.5-4.5H3.5a.5.5 0 0 1-.5-.5v-6z" />
            </svg>

            <!-- Mute Cross (X) -->
            <svg class="mute-icon" viewBox="0 0 24 24" id="mute-icon">
                <line x1="17" y1="8" x2="21" y2="16"/>
                <line x1="21" y1="8" x2="17" y2="16"/>
            </svg>

            <!-- Sound Wave Lines -->
            <svg class="wave-icon" viewBox="0 0 30 30" id="wave-icon">
                <path d="M20 9c2 2 2 10 0 12" />
                <path d="M23 7c3 3 3 14 0 17" />
            </svg>
        </div>

        <!-- Volume slider -->
        <div class="volume-slider-container">
            <div class="volume-track">
                <div class="volume-fill" id="volume-fill"></div>
                <div class="volume-thumb" id="volume-thumb"></div>
                <input type="range" id="volume" min="0" max="100" value="100" />
            </div>
        </div>
    </div>

    <audio id="audio" src="audio.mp3" loop></audio>

   

    <!-- Inline Script for Animations and Video Playback -->
    <script>
        document.querySelector('.enter-overlay').addEventListener('click', () => {
            const overlay = document.querySelector('.enter-overlay');
            const video = document.getElementById('background-video');
            const profile = document.querySelector('.profile-container');

            overlay.classList.add('hidden');
            video.play().catch(err => console.error('Video play failed:', err));

            // Wait for overlay fade-out (0.5s) before starting profile animation
            setTimeout(() => {
                profile.classList.add('slide-in');
            }, 10);
        });
    </script>

    <script src="script.js"></script>
   <!-- <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'934e087a1e26dd1e',t:'MTc0NTQxODM1Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script> -->

    <script>
        const socket      = io();
        const avatarEl    = document.getElementById('avatar');
        const nameEl      = document.getElementById('name');
        const activityLine1 = document.getElementById('activityLine1');
        const activityLine2 = document.getElementById('activityLine2');
        const assetEl     = document.getElementById('asset');
        const card        = document.querySelector('.card');
        const statusIconEl = document.getElementById('statusIcon');

        const shadows = {
          online : '#3ba55d',
          idle   : '#faa61a',
          dnd    : '#ed4245',
          offline: '#747f8d'
        };

        const statusIcons = {
          online: "https://assets.guns.lol/online.png",
          idle: "https://assets.guns.lol/idle.png",
          dnd: "https://assets.guns.lol/dnd.png",
          offline: "https://assets.guns.lol/offline.png",
          streaming: "https://assets.guns.lol/streaming.png"
        };

        // Add this at the start of the script
        let lastStatus = null;
        let lastUserId = null;

        // Enhanced activity type detection function
        function getActivityType(activity) {
          if (!activity || !activity.name) return 'Playing';
          
          // Use Discord activity type if available
          switch (activity.type) {
            case 0: return 'Playing';
            case 1: return 'Streaming';
            case 2: return 'Listening';
            case 3: return 'Watching';
            case 5: return 'Competing';
          }

          // Fallback to keyword detection if type is not one of the standard ones (less likely)
          const activityName = activity.name.toLowerCase();
          
          if (activityName.includes('spotify') || activityName.includes('apple music') || activityName.includes('soundcloud') || activityName.includes('youtube music')) {
            return 'Listening';
          }
          
          if (activityName.includes('crunchyroll') || activityName.includes('netflix') || activityName.includes('hulu') || activityName.includes('disney') || activityName.includes('amazon prime') || activityName.includes('youtube') || activityName.includes('twitch') || activityName.includes('anime') || activityName.includes('movie') || activityName.includes('tv show') || activityName.includes('series')) {
            return 'Watching';
          }
          
          // Default for any other activity type or if name didn't match keywords
          return 'Playing';
        }

        function timeAgo(timestamp) {
          if (!timestamp) return '';
          const now = Date.now();
          const diff = Math.floor((now - timestamp) / 1000);
          if (diff < 60) return `${diff} second${diff !== 1 ? 's' : ''} ago`;
          const min = Math.floor(diff / 60);
          if (min < 60) return `${min} minute${min !== 1 ? 's' : ''} ago`;
          const hr = Math.floor(min / 60);
          if (hr < 24) return `${hr} hour${hr !== 1 ? 's' : ''} ago`;
          const day = Math.floor(hr / 24);
          return `${day} day${day !== 1 ? 's' : ''} ago`;
        }

        function render(data) {
  console.log('[RENDER] Called with data:', data);
  
  // Check if user ID has changed
  if (lastUserId !== data.userId) {
    console.log('[RENDER] User ID changed, clearing cache');
    lastStatus = null;
    lastUserId = data.userId;
  }

  // Force status update if it's different
  if (lastStatus !== data.status) {
    console.log('[RENDER] Status changed from', lastStatus, 'to', data.status);
    lastStatus = data.status;
  }

  if (!avatarEl) console.error('[RENDER] avatarEl not found');
  if (!nameEl) console.error('[RENDER] nameEl not found');
  if (!card) console.error('[RENDER] card not found');
  if (!statusIconEl) console.error('[RENDER] statusIconEl not found');
  if (!activityLine1) console.error('[RENDER] activityLine1 not found');
  if (!activityLine2) console.error('[RENDER] activityLine2 not found');
  if (!assetEl) console.error('[RENDER] assetEl not found');

  // Get the Discord profile container
  const discordContainer = document.querySelector('.discord-Profile-Container');
  
  // Handle offline status first
  if (data.status === 'offline' || !data.status || data.status === 'invisible') {
    console.log('[RENDER] User is offline, status:', data.status);
    if (discordContainer) {
      discordContainer.classList.add('offline');
      discordContainer.classList.remove('no-activity');
    }
    if (activityLine1) {
      activityLine1.textContent = '';
      activityLine1.classList.remove('nothing');
    }
    if (activityLine2) {
      activityLine2.innerHTML = data.timestamp ? `<i>last seen ${timeAgo(data.timestamp)}</i>` : '';
    }
    if (assetEl) assetEl.style.display = 'none';
    if (statusIconEl) {
      statusIconEl.src = statusIcons['offline'];
      console.log('[RENDER] Set status to offline');
    }
  } else {
    console.log('[RENDER] User is online, status:', data.status);
    if (discordContainer) {
      discordContainer.classList.remove('offline');
    }
    if (statusIconEl) {
      if (data.activity && data.activity.type === 1) {
        statusIconEl.src = statusIcons['streaming'];
        console.log('[RENDER] Set status to streaming icon');
      } else {
        statusIconEl.src = statusIcons[data.status] || statusIcons['offline'];
        console.log('[RENDER] Set status to:', data.status);
      }
    }
  }

  // Update avatar and name
  if (avatarEl) {
    avatarEl.src = data.avatar;
    console.log('[RENDER] Set avatar src:', data.avatar);
  }
  if (nameEl) {
    nameEl.textContent = data.username;
    console.log('[RENDER] Set name:', data.username);
  }

  // Handle activity display
  if (data.status !== 'offline' && data.status !== 'invisible' && data.activity) {
    console.log('[RENDER] User has activity');
    const typeLabel = getActivityType(data.activity);
    
    if (activityLine1) {
      activityLine1.innerHTML = `<span>${typeLabel}</span><span>${data.activity.name || ''}</span>`;
      activityLine1.classList.remove('nothing');
    }
    if (activityLine2 && (data.activity.details || data.activity.state)) {
      activityLine2.innerHTML = `<span>${data.activity.details || data.activity.state}</span>`;
    } else if (activityLine2) {
      activityLine2.textContent = '';
    }
    if (assetEl) {
      if (data.activity.largeImage) {
        assetEl.src = data.activity.largeImage;
        assetEl.style.display = 'block';
      } else {
        assetEl.style.display = 'none';
      }
    }
    if (discordContainer) {
      discordContainer.classList.remove('no-activity');
    }
  } else if (data.status !== 'offline' && data.status !== 'invisible') {
    console.log('[RENDER] User is online but has no activity');
    if (activityLine1) {
      activityLine1.textContent = 'currently doing nothing';
      activityLine1.classList.add('nothing');
    }
    if (activityLine2) {
      activityLine2.textContent = '';
    }
    if (assetEl) assetEl.style.display = 'none';
    if (discordContainer) {
      discordContainer.classList.add('no-activity');
    }
  }
}

        socket.on('status', data => {
          console.log('[SOCKET STATUS]', data);
          // Force a fresh render
          render(data);
        });
        fetch('/api/status').then(r => r.json()).then(d => {
          console.log('[API STATUS]', d);
          if (d) {
            // Force a fresh render
            render(d);
          }
        });

        // Add a periodic refresh
        setInterval(() => {
          fetch('/api/status').then(r => r.json()).then(d => {
            if (d) {
              render(d);
            }
          });
        }, 30000); // Refresh every 30 seconds
    </script>
</body>
</html>